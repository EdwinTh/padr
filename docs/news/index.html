<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • padr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Changelog" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">padr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/padr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/padr_custom.html">Custom thickening and padding</a>
    </li>
    <li>
      <a href="../articles/padr_implementation.html">Implementation Information of `padr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/EdwinTh/padr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/EdwinTh/padr/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="padr-0-5-0" class="section level1">
<h1 class="page-header">
<a href="#padr-0-5-0" class="anchor"></a>padr 0.5.0<small> 2019-06-11 </small>
</h1>
<div id="major-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#major-bug-fixes" class="anchor"></a>Major Bug fixes</h2>
<ul>
<li>
<code>thicken</code> preserves missing values in the datetime column and adds them to the added column. The missing values were placed on the wrong position. They were placed on NA position + nr of NAs earlier in the datetime variable, instead of the NA position. Only the first missing value was on the correct position. Bug reported by github user github user levi-nagy.</li>
</ul>
</div>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New Features</h2>
<ul>
<li><p><code>thicken</code> has gained the <code>ties_to_earlier</code> argument. Logical with <code>FALSE</code> as default value. By default when the <code>rounding</code> argument in <code>thicken</code> is set to “up” and the original observation is equal to a value in the higher interval variable, the observation is mapped to the next value in the new variable. (For example 2019-04-14 13:00:00 would be mapped to 2019-04-14 14:00:00 when rounding is “up” and interval is “hour”.) This can be undesired. When this argument is set to <code>TRUE</code> tied observations are mapped to their own value (thus to one value earlier in the new variable). For completeness this argument also works when <code>rounding</code> is “down”. Then, when original and new value are tied, the original value is mapped to the previous value of the higher level interval variable. (For example 2019-04-14 13:00:00 will be mapped to 2019-04-14 12:00:00 when the interval is hour). Feature request by github user stribstrib.</p></li>
<li><p><code>thicken</code> has gained a <code>drop</code> argument. Logical with <code>FALSE</code> as default value. If <code>TRUE</code> the thickened datetime value is dropped from the data frame. Idea by Adam Stone.</p></li>
</ul>
</div>
<div id="minor-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes" class="anchor"></a>Minor changes</h2>
<ul>
<li><p><code>thicken</code> converts datetime values to integers to match values to the higher interval. Because of this the function suffers from the YEAR2038 problem, meaning that it will not give output if a POSIXct is higher than 2038-01-19 03:14:07 because of integer overflow. The problem needs to be addressed in the future, for now a meaningful error is raised when a POSIXt with year 2038 or higher is fed to <code>thicken</code>. Problem detected by github users darneiri and Blundys.</p></li>
<li><p>An informative error is now thrown in <code>pad</code>, <code>pad_cust</code>, <code>thicken</code>, <code>thicken_cust</code> when a data frame does not have any rows. Requested by Julian During.</p></li>
<li><p>The functions <code>thicken</code> and <code>thicken_cust</code> no longer throw a warning when the input datetime variable is unsorted. The functions now silently return the a data frame with the same row order as the input data frame.</p></li>
<li><p>Error within <code>padr</code> for <code>break_above</code> error message is corrected. No longer prints the number of millions in millions. Bug found by Sharla Gelfand.</p></li>
</ul>
<div id="section" class="section level50">
<p></p>
</div>
</div>
</div>
    <div id="padr-0-4-1---0-4-2" class="section level1">
<h1 class="page-header">
<a href="#padr-0-4-1---0-4-2" class="anchor"></a>padr 0.4.1 - 0.4.2<small> 2018-06-26 </small>
</h1>
<p>Patch releases with no impact for the user of the software.</p>
<div id="section-1" class="section level50">
<p></p>
</div>
</div>
    <div id="padr-0-4-0" class="section level1">
<h1 class="page-header">
<a href="#padr-0-4-0" class="anchor"></a>padr 0.4.0<small> 2017-11-16 </small>
</h1>
<div id="improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#improvements" class="anchor"></a>Improvements</h2>
<ul>
<li><p><code>thicken</code> is sped up significantly:</p></li>
<li><p><code>get_interval</code> no longer applied to assess interval validity (its slow on large variables because it converts a POSIX to character). Rather validity is now compared after thickening by checking if results differs from original. Makes function approximately four times faster.</p></li>
<li><p><code>get_interval</code> is sped up significantly:</p></li>
<li><p>to convert date to character <code>format</code> is used, instead of <code>as.character</code>. For large vectors it 4 to 5 times faster.</p></li>
</ul>
</div>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New Features</h2>
<ul>
<li><p><code>span_date</code> and <code>span_time</code> are new functions and they are wrappers around <code>seq.Date</code> and <code>seq.POSIXt</code> respectively. Because of their default settings (minimal specification of date and datetimes and interval inference) they require very little inputs for straightforward spanning.</p></li>
<li><p>The <code>closest_weekday</code> function is introduced. It finds the closest requested weekday around the start of a datetime variable. This function helps to find quickly the <code>start_val</code> for <code>thicken</code> when the interval is “week”.</p></li>
<li><p>Two new functions are introduced that help with visualising interval data.</p></li>
<li><p><code>center_interval</code> shifts the datetime variable from either the beginning or the end of the interval, to the center of the interval. This will improve visualisations such as dot plots and bar plots, where the timestamp is still considered to be continuous.</p></li>
<li><p><code>format_interval</code> takes the start_value of an interval and infers the end. It uses <code>strftime</code> on both the start value and the end value, to create a character vector that reflects the full interval.</p></li>
<li><p>The <code>_cust</code> suite allows for user-specified spanning to use in thickening and padding.</p></li>
<li><p>to create an asymmetric spanning, <code>subset_span</code> subsets a datetime vector to the desired date and time points. These are provided in a list.</p></li>
<li><p><code>span_around</code> takes a datetime variable as input and spans a variable around it of a desired interval. This automates finding the min and the man of <code>x</code> manually, determining which values are needed to create a span of a desired interval, and do the actual spanning.</p></li>
</ul>
</div>
<div id="bug-fixes-enhancements" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-enhancements" class="anchor"></a>Bug Fixes / Enhancements</h2>
<ul>
<li><p>Both <code>pad</code> and <code>thicken</code> will no longer break when there are missing values in the datetime variable. Rows containing missing values will be retained in the returned data frame. In the case of <code>thicken</code> they will remain on the same position as the input data frame. The added column will have a missing value as well. For <code>pad</code> all the rows with missing values will be moved to the end of the dataframe, since there is no natural position for them in the order of padded rows.</p></li>
<li><p>When time variable has NULL as timezone, also <code>posix_to_date</code> used to break (related to <a href='https://github.com/EdwinTh/padr/issues/14'>#14</a>). This made <code>thicken</code> break when the desired interval is “day” or higher. This is now fixed by don’t regarding the timezone.</p></li>
<li><p><code>get_interval</code> now throws an informative error when the datetime variable has missing values (<a href='https://github.com/EdwinTh/padr/issues/33'>#33</a>).</p></li>
<li><p><code>pad</code> now throws an informative error when the datetime variable is used in the grouping (<a href='https://github.com/EdwinTh/padr/issues/38'>#38</a>)</p></li>
<li><p>added “ByteCompile: true” to DESCRIPTION.</p></li>
</ul>
</div>
<div id="further-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#further-changes" class="anchor"></a>Further Changes</h2>
<ul>
<li><p><code>pad</code> no longer throws a message when the interval is specified (<a href='https://github.com/EdwinTh/padr/issues/31'>#31</a>).</p></li>
<li><p><code>span</code> around hours and minutes now start at the current hour and minute. This to make <code>span_around</code> sensible.</p></li>
</ul>
<div id="section-2" class="section level50">
<p></p>
</div>
</div>
</div>
    <div id="padr-0-3-0" class="section level1">
<h1 class="page-header">
<a href="#padr-0-3-0" class="anchor"></a>padr 0.3.0<small> 2017-05-15 </small>
</h1>
<div id="changes" class="section level2">
<h2 class="hasAnchor">
<a href="#changes" class="anchor"></a>Changes</h2>
<div id="interval-no-long-required-to-be-of-a-single-unit" class="section level4">
<h4 class="hasAnchor">
<a href="#interval-no-long-required-to-be-of-a-single-unit" class="anchor"></a>Interval no long required to be of a single unit</h4>
<p>The interval is no longer limited to be of a single unit, for each of the eight interval sizes. Every time span accepted by <code>seq.Date</code> or <code>seq.POSIXt</code> is now accepted. Since the original implementation was fully around single-unit-intervals, some default behavior had to change. Because of it, this version is not entirely backwards compatible with earlier versions of <code>padr</code>. The following functions are affected:</p>
<ul>
<li><p><code>thicken</code>: the <code>interval</code> argument now has to be specified. In earlier versions it was optional. When it was not specified, the added variable was one interval level higher than that of the input datetime variable. With the widening of the interval definition, there is not longer a natural step up.</p></li>
<li><p><code>get_interval</code>: does no longer only retrieve the interval of a datetime variable, but also its unit (the step size). For instance, the following would have returned “day” in the past, but will now return “2 day”:</p></li>
</ul>
<p>date_var &lt;- as.Date(c(‘2017-01-01’, ‘2017-01-03’, ‘2017-01-05’)) get_interval(date_var)</p>
<ul>
<li>
<code>pad</code>: when the interval is not specified, <code>get_interval</code> is applied on the datetime variable. Its outcome might now be different. When <code>get_interval</code> returns a different interval than it used to, <code>pad</code> will do the padding at this different interval. Extending the above example, the have resulted in a data frame with two padded rows:</li>
</ul>
<p>x &lt;- data.frame(date_var, y = 1:3)</p>
<p>Since the interval of <code>date_var</code> used be “day”, there were missing records for 2017-01-02 and 2017-01-04. These records were inserted, with missing values for y. However, now the interval of <code>date_var</code> is “2 day” and on this level there is no need for padding. To get the original result the interval argument should be specified with “day”.</p>
</div>
<div id="changes-in-pad" class="section level4">
<h4 class="hasAnchor">
<a href="#changes-in-pad" class="anchor"></a>Changes in <code>pad</code>
</h4>
<p>Pad has been reimplemented</p>
<p>The function was slow when applied on many groups becuause it looped over them. Function has been reimplemented so it needs only one join to do the padding for all the groups simultaneously. <code>dplyr</code> functions are used for this new implementation, both for speed and coding clarity.</p>
<p>When applying pad to groups the interval is determined differently. It used to determine the interval separately for each of the groups. With the new interval definition this would often yield undesired results. Now, the interval on the full datetime variable, ignoring the groups. If the user would like to allow for differing intervals over the groups it is advised to use <code><a href="https://dplyr.tidyverse.org/reference/do.html">dplyr::do</a></code>. See also the final example of <code>pad</code>.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html">dplyr::group_by</a></code></p>
<p>Besides its own argument for grouping, <code>pad</code> does now also accepts the grouping from <code>dplyr</code>. Making the following two results equal:</p>
<p>x %&gt;% dplyr::group_by(z) %&gt;% pad x %&gt;% pad(group = ‘z’)</p>
<p>Moreover, both <code>pad</code> and <code>thicken</code> now maintain the grouping of the input data_frame. The return from both functions will have the exact same grouping.</p>
<p><code>break_above</code></p>
<p>This new argument to <code>pad</code> is a safety net for situations where the returned dataframe is much larger than the user anticipated. This would happen when the datetime variable is of a lower interval than the user thought it was. Before doing the actual padding, the function estimates the number of rows in the result. If these are above <code>break_above</code> the function will break.</p>
</div>
<div id="changes-in-thicken" class="section level4">
<h4 class="hasAnchor">
<a href="#changes-in-thicken" class="anchor"></a>Changes in <code>thicken</code>
</h4>
<ul>
<li>Observations before the <code>start_val</code> are now removed from the dataset (with a warning). They used to be all mapped to the <code>start_val</code>.</li>
</ul>
</div>
<div id="fill_by-functions-default-behavior-is-changed-" class="section level4">
<h4 class="hasAnchor">
<a href="#fill_by-functions-default-behavior-is-changed-" class="anchor"></a>fill_by functions default behavior is changed.</h4>
<p>They used to require specification of all the column names that had to filled. This is annoying when many columns had to filled. The functions no longer break when no variable names are specified, but they fill all columns in the data frame.</p>
</div>
</div>
<div id="new-features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-2" class="anchor"></a>New features</h2>
</div>
</div>
    <div id="padr-0-2-1" class="section level1">
<h1 class="page-header">
<a href="#padr-0-2-1" class="anchor"></a>padr 0.2.1<small> 2017-02-19 </small>
</h1>
<div id="bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-1" class="anchor"></a>Bug fixes</h2>
<ul>
<li>Issue <a href='https://github.com/EdwinTh/padr/issues/11'>#11</a>: in the pad function the by argument did not reach the lower function pad_single and pad_multiple. As a result pad broke when using this argument. This bug is fixed by using do.call in both pad and pad_multiple.</li>
</ul>
<div id="section-4" class="section level50">
<p></p>
</div>
</div>
</div>
    <div id="padr-0-2-0" class="section level1">
<h1 class="page-header">
<a href="#padr-0-2-0" class="anchor"></a>padr 0.2.0<small> 2017-02-08 </small>
</h1>
<div id="new-feature" class="section level2">
<h2 class="hasAnchor">
<a href="#new-feature" class="anchor"></a>New feature</h2>
<p>pad has gained a group parameter. This takes a character vector that indicates the column names within which group padding must be done. The returned data frame is complete for the grouping variable(s). Leaving no longer the doubt which record belongs to which group member, especially when start_val and / or end_val was specified.</p>
</div>
<div id="bug-fixes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-2" class="anchor"></a>Bug fixes</h2>
<ul>
<li><p>Issue <a href='https://github.com/EdwinTh/padr/issues/8'>#8</a>: pad does no longer break when datetime variable contains one value only. Returns x and a warning, if start_val and end_val are NULL and will do proper padding when one or both are specified.</p></li>
<li><p>Issue <a href='https://github.com/EdwinTh/padr/issues/9'>#9</a>: when forgetting to specify at least one column, on which to apply the fill_ function, the fill_ function will now throw a meaningful error.</p></li>
<li><p>Issue <a href='https://github.com/EdwinTh/padr/issues/10'>#10</a>: pad was broken with an error the interval was quarter, month, or year. This was done by check_start_end, even when neither a start_val nor an end_val was specified. It appeared that when concatenating POSIX vectors, as happened in the check_start_end function, the result is enforced to the timezone of the locale (including daylight savings time). This breaks the interval if the original vectors were not of this timezone. Workaround is implemented.</p></li>
</ul>
<div id="section-5" class="section level50">
<p></p>
</div>
</div>
</div>
    <div id="padr-0-1-0" class="section level1">
<h1 class="page-header">
<a href="#padr-0-1-0" class="anchor"></a>padr 0.1.0<small> 2017-01-17 </small>
</h1>
<ul>
<li>Initial release</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#padr-0-5-0">0.5.0</a></li>
        <li><a href="#padr-0-4-1---0-4-2">0.4.1</a></li>
        <li><a href="#padr-0-4-0">0.4.0</a></li>
        <li><a href="#padr-0-3-0">0.3.0</a></li>
        <li><a href="#padr-0-2-1">0.2.1</a></li>
        <li><a href="#padr-0-2-0">0.2.0</a></li>
        <li><a href="#padr-0-1-0">0.1.0</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="copyright">
  <p>Developed by Edwin Thoen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

